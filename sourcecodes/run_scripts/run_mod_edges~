#!/usr/bin/octave -qf
cd ./data
arg_list = argv(); 
addpath("../bnt-master");
addpath(genpathKPM("../bnt-master"));
addpath("../parameter_learning");
modifyEdges(arg_list{1},arg_list{2});

fname1=strcat(arg_list{1},"continuous_input.txt");
fname2=strcat(arg_list{2},"continuous_input.txt");
copyfile(fname1,fname2);

fname1=strcat(arg_list{1},"continuous_input_orig.txt");
fname2=strcat(arg_list{2},"continuous_input_orig.txt");
copyfile(fname1,fname2);

fname1=strcat(arg_list{1},"nnode.txt");
fname2=strcat(arg_list{2},"nnode.txt");
copyfile(fname1,fname2);

fname1=strcat(arg_list{1},"name.txt");
fname2=strcat(arg_list{2},"name.txt");
copyfile(fname1,fname2);

fname1=strcat(arg_list{1},"type.txt");
fname2=strcat(arg_list{2},"type.txt");
copyfile(fname1,fname2);

fname1=strcat(arg_list{1},"nlevels.txt");
fname2=strcat(arg_list{2},"nlevels.txt");
copyfile(fname1,fname2);

fname1=strcat(arg_list{1},"grviz_name_file.txt");
fname2=strcat(arg_list{2},"grviz_name_file.txt");
copyfile(fname1,fname2);

runBN_initial(arg_list{2});
createSVG(arg_list{2});
createJSON(arg_list{2});
output = strcat(arg_list{2},"network.svg");
command = cstrcat("/usr/bin/dot -Tsvg -o",output," ",arg_list{1},"graphviz_svg.txt > ",output);
system(command);
output2 = strcat(arg_list{2},"network_no_edge.svg");
command2 = cstrcat("/usr/bin/dot -Tsvg -o",output2," ",arg_list{2},"graphviz_svg_no_edge.txt > ",output2);
system(command2);
